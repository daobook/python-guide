
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="zh_CN">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Packaging Your Code &#8212; The Hitchhiker&#39;s Guide to Python</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="Freezing Your Code" href="freezing.html" />
    <link rel="prev" title="Publishing Your Code" href="publishing.html" />
  

  

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    div.body {
      min-width: initial;
      max-width: initial;
    }
  </style>

  
  <link rel="canonical" href="https://docs.python-guide.org/shipping/packaging/"/>
  <meta property="og:url" content="https://docs.python-guide.org/shipping/packaging">
  

  <link rel="icon" type="image/png" href="https://media.readthedocs.org/images/favicon.png">

  <meta name="google-site-verification" content="013PxE2_8KX9jdUSC5gr8QsfdxTXr1mFgmD9zplp5II" />

  <meta name="twitter:card" content="summary">
  <meta property="twitter:image" content="https://docs.python-guide.org/_static/social-card.jpg">
  <meta property="og:image" content="https://docs.python-guide.org/_static/social-card.jpg">
  <meta property="og:title" content="Packaging Your Code &#8212; The Hitchhiker&#39;s Guide to Python">
  <meta property="og:type" content="article">
  
  <meta property="og:description" content="">

  <script>window.rp_prop_id = '29182759436';</script>
  <script src="https://srv.realpython.net/tag.js" async></script>

  <script src="https://d31vxm9ubutrmw.cloudfront.net/static/js/2169.js"></script>

  
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-37242602-11', 'auto');
    ga('send', 'pageview');
    </script>

  </head><body>

  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            <div style="display:block;position:relative; margin-bottom: 1em;">
              <div style="display:block;width:100%;padding-top:12.5%;"></div>
              <div class="rpad" data-unit="8x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"></div>
            </div>
            
  <div class="section" id="packaging-your-code">
<span id="packaging-your-code-ref"></span><h1>Packaging Your Code<a class="headerlink" href="#packaging-your-code" title="永久链接至标题">¶</a></h1>
<img alt="../_images/36137234682_be6898bf57_k_d.jpg" src="../_images/36137234682_be6898bf57_k_d.jpg" />
<p>Package your code to share it with other developers. For example,
to share a library for other developers to use in their application,
or for development tools like ‘py.test’.</p>
<p>An advantage of this method of distribution is its well established ecosystem
of tools such as PyPI and pip, which make it easy for other developers to
download and install your package either for casual experiments, or as part of
large, professional systems.</p>
<p>It is a well-established convention for Python code to be shared this way.
If your code isn’t packaged on PyPI, then it will be harder
for other developers to find it and to use it as part of their existing
process. They will regard such projects with substantial suspicion of being
either badly managed or abandoned.</p>
<p>The downside of distributing code like this is that it relies on the
recipient understanding how to install the required version of Python,
and being able and willing to use tools such as pip to install your code’s
other dependencies. This is fine when distributing to other developers, but
makes this method unsuitable for distributing applications to end-users.</p>
<p>The <a class="reference external" href="https://python-packaging-user-guide.readthedocs.io/">Python Packaging Guide</a>
provides an extensive guide on creating and maintaining Python packages.</p>
<div class="section" id="alternatives-to-packaging">
<h2>Alternatives to Packaging<a class="headerlink" href="#alternatives-to-packaging" title="永久链接至标题">¶</a></h2>
<p>To distribute applications to end-users, you should
<a class="reference internal" href="freezing.html#freezing-your-code-ref"><span class="std std-ref">freeze your application</span></a>.</p>
<p>On Linux, you may also want to consider
<a class="reference internal" href="#packaging-for-linux-distributions-ref"><span class="std std-ref">creating a Linux distro package</span></a>
(e.g. a .deb file for Debian or Ubuntu.)</p>
</div>
<div class="section" id="for-python-developers">
<h2>For Python Developers<a class="headerlink" href="#for-python-developers" title="永久链接至标题">¶</a></h2>
<p>If you’re writing an open source Python module, <a class="reference external" href="http://pypi.org">PyPI</a>
, more properly known as <em>The Cheeseshop</em>, is the place to host it.</p>
<div class="section" id="pip-vs-easy-install">
<h3>Pip vs. easy_install<a class="headerlink" href="#pip-vs-easy-install" title="永久链接至标题">¶</a></h3>
<p>Use <a class="reference external" href="http://pypi.org/project/pip">pip</a>.  More details
<a class="reference external" href="https://stackoverflow.com/questions/3220404/why-use-pip-over-easy-install">here</a>.</p>
</div>
<div class="section" id="personal-pypi">
<h3>Personal PyPI<a class="headerlink" href="#personal-pypi" title="永久链接至标题">¶</a></h3>
<p>If you want to install packages from a source other than PyPI (say, if
your packages are <em>proprietary</em>), you can do it by hosting a simple HTTP
server, running from the directory which holds those packages which need to be
installed.</p>
<p><strong>Showing an example is always beneficial</strong></p>
<p>For example, if you want to install a package called <code class="file docutils literal notranslate"><span class="pre">MyPackage.tar.gz</span></code>,
and assuming this is your directory structure:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>archive</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>MyPackage</dt>
<dd><ul class="first last">
<li>MyPackage.tar.gz</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>Go to your command prompt and type:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> archive
<span class="gp">$</span> python -m http.server <span class="m">9000</span>
</pre></div>
</div>
<p>This runs a simple HTTP server running on port 9000 and will list all packages
(like <strong>MyPackage</strong>). Now you can install <strong>MyPackage</strong> using any Python
package installer. Using pip, you would do it like:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> pip install --extra-index-url<span class="o">=</span>http://127.0.0.1:9000/ MyPackage
</pre></div>
</div>
<p>Having a folder with the same name as the package name is <strong>crucial</strong> here.
I got fooled by that, one time. But if you feel that creating a folder called
<code class="file docutils literal notranslate"><span class="pre">MyPackage</span></code> and keeping <code class="file docutils literal notranslate"><span class="pre">MyPackage.tar.gz</span></code> inside that is
<em>redundant</em>, you can still install MyPackage using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> pip install  http://127.0.0.1:9000/MyPackage.tar.gz
</pre></div>
</div>
<div class="section" id="pypiserver">
<h4>pypiserver<a class="headerlink" href="#pypiserver" title="永久链接至标题">¶</a></h4>
<p><a class="reference external" href="https://pypi.org/project/pypiserver">pypiserver</a> is a minimal PyPI
compatible server.  It can be used to serve a set of packages to easy_install
or pip.  It includes helpful features like an administrative command
(<code class="docutils literal notranslate"><span class="pre">-U</span></code>) which will update all its packages to their latest versions
found on PyPI.</p>
</div>
<div class="section" id="s3-hosted-pypi">
<h4>S3-Hosted PyPi<a class="headerlink" href="#s3-hosted-pypi" title="永久链接至标题">¶</a></h4>
<p>One simple option for a personal PyPI server is to use Amazon S3. A
prerequisite for this is that you have an Amazon AWS account with an S3 bucket.</p>
<ol class="arabic simple">
<li><strong>Install all your requirements from PyPi or another source</strong></li>
<li><strong>Install pip2pi</strong></li>
</ol>
<ul class="simple">
<li><code class="code docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">git+https://github.com/wolever/pip2pi.git</span></code></li>
</ul>
<ol class="arabic simple" start="3">
<li><strong>Follow pip2pi README for pip2tgz and dir2pi commands</strong></li>
</ol>
<ul class="simple">
<li><code class="code docutils literal notranslate"><span class="pre">pip2tgz</span> <span class="pre">packages/</span> <span class="pre">YourPackage</span></code> (or <code class="code docutils literal notranslate"><span class="pre">pip2tgz</span> <span class="pre">packages/</span> <span class="pre">-r</span> <span class="pre">requirements.txt</span></code>)</li>
<li><code class="code docutils literal notranslate"><span class="pre">dir2pi</span> <span class="pre">packages/</span></code></li>
</ul>
<ol class="arabic simple" start="4">
<li><strong>Upload the new files</strong></li>
</ol>
<ul class="simple">
<li>Use a client like Cyberduck to sync the entire <code class="file docutils literal notranslate"><span class="pre">packages</span></code> folder to your s3 bucket.</li>
<li>Make sure you upload <code class="code docutils literal notranslate"><span class="pre">packages/simple/index.html</span></code> as well as all new files and directories.</li>
</ul>
<ol class="arabic simple" start="5">
<li><strong>Fix new file permissions</strong></li>
</ol>
<ul class="simple">
<li>By default, when you upload new files to the S3 bucket, they will have the wrong permissions set.</li>
<li>Use the Amazon web console to set the READ permission of the files to EVERYONE.</li>
<li>If you get HTTP 403 when trying to install a package, make sure you’ve set the permissions correctly.</li>
</ul>
<ol class="arabic simple" start="6">
<li><strong>All done</strong></li>
</ol>
<ul class="simple">
<li>You can now install your package with <code class="code docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--index-url=http://your-s3-bucket/packages/simple/</span> <span class="pre">YourPackage</span></code>.</li>
</ul>
</div>
</div>
</div>
<div class="section" id="for-linux-distributions">
<span id="packaging-for-linux-distributions-ref"></span><h2>For Linux Distributions<a class="headerlink" href="#for-linux-distributions" title="永久链接至标题">¶</a></h2>
<p>Creating a Linux distro package is arguably the “right way” to distribute code
on Linux.</p>
<p>Because a distribution package doesn’t include the Python interpreter, it
makes the download and install about 2-12 MB smaller than
<a class="reference internal" href="freezing.html#freezing-your-code-ref"><span class="std std-ref">freezing your application</span></a>.</p>
<p>Also, if a distribution releases a new security update for Python, then your
application will automatically start using that new version of Python.</p>
<p>The bdist_rpm command makes <a class="reference external" href="https://docs.python.org/3/distutils/builtdist.html#creating-rpm-packages">producing an RPM file</a>
for use by distributions like Red Hat or SuSE trivially easy.</p>
<p>However, creating and maintaining the different configurations required for
each distribution’s format (e.g. .deb for Debian/Ubuntu, .rpm for Red
Hat/Fedora, etc.) is a fair amount of work. If your code is an application that
you plan to distribute on other platforms, then you’ll also have to create and
maintain the separate config required to freeze your application for Windows
and OS X. It would be much less work to simply create and maintain a single
config for one of the cross platform <a class="reference internal" href="freezing.html#freezing-your-code-ref"><span class="std std-ref">freezing tools</span></a>, which will produce stand-alone executables for all
distributions of Linux, as well as Windows and OS X.</p>
<p>Creating a distribution package is also problematic if your code is for a
version of Python that isn’t currently supported by a distribution.
Having to tell <em>some versions</em> of Ubuntu end-users that they need to add <a class="reference external" href="https://launchpad.net/~fkrull/+archive/ubuntu/deadsnakes">the
‘dead-snakes’ PPA</a>
using <cite>sudo apt-repository</cite> commands before they can install your .deb file
makes for an extremely hostile user experience. Not only that, but you’d have
to maintain a custom equivalent of these instructions for every distribution,
and worse, have your users read, understand, and act on them.</p>
<p>Having said all that, here’s how to do it:</p>
<ul class="simple">
<li><a class="reference external" href="https://fedoraproject.org/wiki/Packaging:Python">Fedora</a></li>
<li><a class="reference external" href="http://www.debian.org/doc/packaging-manuals/python-policy/">Debian and Ubuntu</a></li>
<li><a class="reference external" href="https://wiki.archlinux.org/index.php/Python_Package_Guidelines">Arch</a></li>
</ul>
<div class="section" id="useful-tools">
<h3>Useful Tools<a class="headerlink" href="#useful-tools" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="https://github.com/jordansissel/fpm">fpm</a></li>
<li><a class="reference external" href="http://joeyh.name/code/alien/">alien</a></li>
<li><a class="reference external" href="https://dh-virtualenv.readthedocs.io/">dh-virtualenv</a> (for APT/DEB omnibus packaging)</li>
</ul>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/python-guide-logo.png" title="The Hitchhiker's Guide to Python"/>
  </a>
</p>

<p style="margin-left:auto; margin-right: auto;"><iframe src="https://ghbtns.com/github-btn.html?user=realpython&repo=python-guide&type=watch&count=true&size=large" allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe></p>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
<style>
.algolia-autocomplete{
  width: 100%;
  height: 1.5em
}
.algolia-autocomplete a{
  border-bottom: none !important;
}
#doc_search{
  width: 100%;
  height: 100%;
}
</style>
<input id="doc_search" placeholder="Search the doc" autofocus/>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js" onload="docsearch({
  apiKey: '512b0d6c0c8578bed7662f5279c2249c',
  indexName: 'python-guide',
  inputSelector: '#doc_search',
  debug: false // Set debug to true if you want to inspect the dropdown
})" async></script>

<p>
  This opinionated guide exists to provide both novice and expert Python developers a best practice handbook to the installation, configuration, and usage of Python on a daily basis.
</p>

<div style="display:block;position:relative;margin: 1em 0 1em 0;">
  <div style="display:block;width:100%;padding-top:100%;"></div>
  <div class="rpad" data-unit="1x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"></div>
</div>

<h3>O'Reilly Book</h3>

<p>This guide is now available in tangible book form!</p>

<p><a href="/guide-book" target="_blank"><img style="max-width: 100%; text-align: center;" src="/_static/guide-book-cover.jpg" alt="Python Guide Book Cover"></a></p>

<p>All proceeds are being directly donated to the <a href="https://djangogirls.org">DjangoGirls</a> organization.</p>

<h3>Translations</h3>
<ul>
  <li><a href="https://docs.python-guide.org/">English</a></li>
  <li><a href="https://python-guide-fr.readthedocs.io/fr/latest/">French</a></li>
  <li><a href="https://pythonguidecn.readthedocs.io/zh/latest/">Chinese</a></li>
  <li><a href="http://python-guideja.readthedocs.io/ja/latest/">Japanese</a></li>
  <li><a href="https://python-guide-kr.readthedocs.io/ko/latest/">Korean</a></li>
  <li><a href="http://python-guide-fil.readthedocs.io/en/latest/">Filipino</a></li>
  <li><a href="http://python-guide-pt-br.readthedocs.io/pt_BR/latest/">Brazilian Portuguese</a></li>
</ul>
  <h3><a href="../index.html">內容目录</a></h3>
  <ul>
<li><a class="reference internal" href="#">Packaging Your Code</a><ul>
<li><a class="reference internal" href="#alternatives-to-packaging">Alternatives to Packaging</a></li>
<li><a class="reference internal" href="#for-python-developers">For Python Developers</a><ul>
<li><a class="reference internal" href="#pip-vs-easy-install">Pip vs. easy_install</a></li>
<li><a class="reference internal" href="#personal-pypi">Personal PyPI</a><ul>
<li><a class="reference internal" href="#pypiserver">pypiserver</a></li>
<li><a class="reference internal" href="#s3-hosted-pypi">S3-Hosted PyPi</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#for-linux-distributions">For Linux Distributions</a><ul>
<li><a class="reference internal" href="#useful-tools">Useful Tools</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="publishing.html" title="上一章">Publishing Your Code</a></li>
      <li>Next: <a href="freezing.html" title="下一章">Freezing Your Code</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="转向" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><!-- Alabaster (krTheme++) Hacks -->
        </div>
      </div>
      <div class="clearer"></div>
    </div>
<div class="footer">
  <div style="text-align: center;" id="waldo-tag-2171"></div>
  <p>&copy;2011-2021 <a href="https://www.kennethreitz.org/projects">Kenneth Reitz</a> &amp; <a href="https://realpython.com">Real Python</a>. <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/">CC BY-NC-SA 3.0</a></p>
</div>

  </body>
</html>